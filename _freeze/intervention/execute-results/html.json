{
  "hash": "8e510f2744545340384ee4d700118e65",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Intervention impact\"\ndate: \"2025-09-25\"     # ISO format; quoted\ndate-format: \"D MMMM YYYY\"  # optional: 25 September 2025\nformat: \n  html:\n    code-fold: true\n    number-sections: false\nexecute:\n  echo: false\n  warning: false\n  freeze: true         # (you can keep this on after you refresh the cache)\nbibliography: references.bib\ncsl: nature.csl\n---\n\nDay 180 survival rates were compared by model-predicted CRE infection risk using 3 categories:\n\n-   Low risk (≤ 10%)\n\n-   Medium risk (11-29%)\n\n-   High risk (≥ 30%)\n\n| Risk group | n | n_deaths | death rate | survival rate | n_CRE | cre rate | n_discharge | discharge rate |\n|--------|--------|--------|--------|--------|--------|--------|--------|--------|\n| Low | 90 | 3 | 3.3 | 96.7 | 9 | 10 | 74 | 82.2 |\n| Medium | 50 | 2 | 4 | 96 | 11 | 22 | 35 | 70 |\n| High | 64 | 10 | 15.6 | 84.4 | 30 | 46.9 | 24 | 37.5 |\n\n::: {#fig-compete_strat}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSIMPLE RISK ANALYSIS WITH NA HANDLING\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Loading Data ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTotal records: 3170 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAfter filtering: 692 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Creating Outcomes ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nValid patients: 692 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDeaths within 180 days: 113 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCrude mortality: 16.3 %\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Preparing Predictors ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAge: 690 valid values, range 0-76\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nMELD: 684 valid values, range 2-46\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCCI: 692 valid values\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nComplications:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Complication 1: 305 cases\n  Complication 2: 224 cases\n  Complication 3: 146 cases\n  Complication 4: 70 cases\n  Complication 5: 195 cases\n  Complication 6: 55 cases\n  Complication 7: 77 cases\n  Complication 8: 56 cases\n  Complication 9: 2 cases\n  Complication 10: 180 cases\n  Complication 11: 126 cases\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Creating Risk Score ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAdded age component (median = 57)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAdded MELD component (median = 21)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAdded compli_1 (n=305)\nAdded compli_3 (n=146)\nAdded compli_5 (n=195)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nRisk score distribution:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  0   1   2   3   4   5 \n 84 217 170 143  69   9 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Creating Risk Groups ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nRisk group distribution:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n   Low Medium   High \n   301    170    221 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Adding CRE Status ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCRE from dates: 180 infections\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTotal CRE infections within 180 days: 180\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== ANALYSIS RESULTS ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nOverall 180-day mortality: 16.3%\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Mortality by Risk Group ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  risk_group   n deaths mortality_pct cre_n cre_pct\n1        Low 301     20           6.6    49    16.3\n2     Medium 170     28          16.5    44    25.9\n3       High 221     65          29.4    87    39.4\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Mortality by CRE Status ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  CRE_status   n deaths mortality_pct\n1       CRE+ 180     60          33.3\n2       CRE- 512     53          10.4\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Mortality by Risk Group and CRE Status ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  risk_group CRE_status   n deaths mortality_pct\n1        Low       CRE+  49      7          14.3\n2        Low       CRE- 252     13           5.2\n3     Medium       CRE+  44     14          31.8\n4     Medium       CRE- 126     14          11.1\n5       High       CRE+  87     39          44.8\n6       High       CRE- 134     26          19.4\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](intervention_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nANALYSIS COMPLETE\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nData saved as 'baseline_data' and 'baseline_data_final.RData'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nResults saved to 'mortality_by_risk_and_cre.csv'\n```\n\n\n:::\n:::\n\n\nExcess CRE-related mortality by baseline mortality risk\n:::\n\n::: {#fig-compete_pro_retro}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCRE MANAGEMENT STRATEGY ANALYSIS\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSTRATIFIED BY DATA COLLECTION METHOD\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nVersion: Fully Robust with Error Handling\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Creating Management Strategy Variable ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCheckbox variables found:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\ncre_colonization___1 (No strategy):\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  0   1 \n170 522 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncre_colonization___2 (Targeted prophylaxis):\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  0   1 \n593  99 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncre_colonization___3 (Pre-emptive strategy):\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n  0   1 \n623  69 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nWARNING: 13 patients have multiple strategies recorded\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Management Strategy Distribution ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n         No Strategy Targeted Prophylaxis Pre-emptive Strategy \n                 512                   96                   69 \n                <NA> \n                  15 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Data Collection Method ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Collection Method Distribution (raw values) ---\n\n  1   2 \n521 171 \n\nUnique values in retro_or_pros:  1, 2 \nDetected binary coding (1/2)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Collection Method Distribution (cleaned) ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nRetrospective   Prospective \n          521           171 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Baseline Characteristics ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Patient Characteristics (Stratified) ---\n  collection_method         cre_strategy   n age_mean meld_mean cre_infections\n1     Retrospective          No Strategy 384     54.3      21.0             71\n2     Retrospective Targeted Prophylaxis  75     52.9      26.7             21\n3     Retrospective Pre-emptive Strategy  49     56.7      22.0             34\n4     Retrospective                 <NA>  13     55.5      17.5              2\n5       Prospective          No Strategy 128     53.0      21.3             38\n6       Prospective Targeted Prophylaxis  21     54.2      25.6              7\n7       Prospective Pre-emptive Strategy  20     50.9      22.0              7\n8       Prospective                 <NA>   2     62.0      25.0              0\n  infection_rate deaths mortality_rate\n1           18.5     49           12.8\n2           28.0     13           17.3\n3           69.4     12           24.5\n4           15.4      4           30.8\n5           29.7     26           20.3\n6           33.3      4           19.0\n7           35.0      5           25.0\n8            0.0      0            0.0\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Overall Survival Analysis ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalyzing 677 patients\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOverall log-rank test p-value:  0.07545 \n```\n\n\n:::\n\n::: {.cell-output-display}\n![](intervention_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Retrospective Data Analysis ===\nN = 508 \nStrategies present: Targeted Prophylaxis, No Strategy, Pre-emptive Strategy \nRetrospective log-rank p-value:  0.059048 \n```\n\n\n:::\n\n::: {.cell-output-display}\n![](intervention_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Prospective Data Analysis ===\nN = 169 \nStrategies present: Targeted Prophylaxis, No Strategy, Pre-emptive Strategy \nProspective log-rank p-value:  0.82099 \n```\n\n\n:::\n\n::: {.cell-output-display}\n![](intervention_files/figure-html/unnamed-chunk-2-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n=== Cox Regression Models ===\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Overall Model (Adjusted) ---\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ cre_strategy + age_clean + meld_clean + \n    cre_180, data = data_complete)\n\n  n= 672, number of events= 108 \n   (5 observations deleted due to missingness)\n\n                                     coef exp(coef) se(coef)     z Pr(>|z|)    \ncre_strategyTargeted Prophylaxis 0.085859  1.089652 0.273276 0.314   0.7534    \ncre_strategyPre-emptive Strategy 0.071702  1.074335 0.279345 0.257   0.7974    \nage_clean                        0.010890  1.010949 0.007903 1.378   0.1682    \nmeld_clean                       0.023789  1.024074 0.011041 2.155   0.0312 *  \ncre_180                          1.299960  3.669151 0.201821 6.441 1.19e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                 exp(coef) exp(-coef) lower .95 upper .95\ncre_strategyTargeted Prophylaxis     1.090     0.9177    0.6378     1.862\ncre_strategyPre-emptive Strategy     1.074     0.9308    0.6214     1.857\nage_clean                            1.011     0.9892    0.9954     1.027\nmeld_clean                           1.024     0.9765    1.0022     1.046\ncre_180                              3.669     0.2725    2.4704     5.449\n\nConcordance= 0.677  (se = 0.028 )\nLikelihood ratio test= 52.88  on 5 df,   p=4e-10\nWald test            = 54.46  on 5 df,   p=2e-10\nScore (logrank) test = 62.26  on 5 df,   p=4e-12\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--- Testing Strategy x Collection Method Interaction ---\nLikelihood ratio statistic: 0.484 \nDegrees of freedom: 2 \nInteraction p-value:  0.78523 \nNo significant interaction\nStrategy effectiveness similar across collection methods\n\n--- Retrospective Cox Model ---\nCall:\ncoxph(formula = surv_retro_cox ~ cre_strategy + age_clean + meld_clean, \n    data = data_retro)\n\n  n= 505, number of events= 73 \n   (3 observations deleted due to missingness)\n\n                                     coef exp(coef) se(coef)     z Pr(>|z|)   \ncre_strategyTargeted Prophylaxis 0.204158  1.226491 0.319012 0.640  0.52219   \ncre_strategyPre-emptive Strategy 0.685673  1.985108 0.324795 2.111  0.03476 * \nage_clean                        0.008462  1.008498 0.009779 0.865  0.38683   \nmeld_clean                       0.036763  1.037447 0.013218 2.781  0.00541 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                 exp(coef) exp(-coef) lower .95 upper .95\ncre_strategyTargeted Prophylaxis     1.226     0.8153    0.6563     2.292\ncre_strategyPre-emptive Strategy     1.985     0.5038    1.0503     3.752\nage_clean                            1.008     0.9916    0.9894     1.028\nmeld_clean                           1.037     0.9639    1.0109     1.065\n\nConcordance= 0.624  (se = 0.033 )\nLikelihood ratio test= 13.16  on 4 df,   p=0.01\nWald test            = 13.77  on 4 df,   p=0.008\nScore (logrank) test = 14.11  on 4 df,   p=0.007\n\n\n--- Prospective Cox Model ---\nCall:\ncoxph(formula = surv_prosp_cox ~ cre_strategy + age_clean + meld_clean, \n    data = data_prosp)\n\n  n= 167, number of events= 35 \n   (2 observations deleted due to missingness)\n\n                                     coef exp(coef) se(coef)      z Pr(>|z|)\ncre_strategyTargeted Prophylaxis -0.07005   0.93235  0.54178 -0.129    0.897\ncre_strategyPre-emptive Strategy  0.30992   1.36332  0.48955  0.633    0.527\nage_clean                         0.01327   1.01336  0.01341  0.990    0.322\nmeld_clean                        0.01296   1.01305  0.02064  0.628    0.530\n\n                                 exp(coef) exp(-coef) lower .95 upper .95\ncre_strategyTargeted Prophylaxis    0.9323     1.0726    0.3224     2.696\ncre_strategyPre-emptive Strategy    1.3633     0.7335    0.5223     3.559\nage_clean                           1.0134     0.9868    0.9871     1.040\nmeld_clean                          1.0130     0.9871    0.9729     1.055\n\nConcordance= 0.553  (se = 0.05 )\nLikelihood ratio test= 1.49  on 4 df,   p=0.8\nWald test            = 1.5  on 4 df,   p=0.8\nScore (logrank) test = 1.5  on 4 df,   p=0.8\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSUMMARY OF FINDINGS\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n============================================\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n1. Overall Analysis:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   - Total N:  677 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   - Overall log-rank p:  0.07545 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n2. Stratified Analysis:\n   - Retrospective N:  508 \n   - Retrospective p:  0.059048 \n   - Prospective N:  169 \n   - Prospective p:  0.82099 \n\n3. Interaction Test:\n   - p-value:  0.78523 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nAnalysis complete.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPlots saved:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  - km_overall_strategy.png\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  - km_retrospective.png\n  - km_prospective.png\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nResults saved to cre_stratified_analysis_results.RData\n```\n\n\n:::\n:::\n\n\n:::\n",
    "supporting": [
      "intervention_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}